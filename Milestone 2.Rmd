---
title: "Milestone 2"
author: "Caitlin Bolz, Faith Kulzer, Samuel Peters, and Steven Xia"
date: "3/7/2021"
output: html_document
---

```{r, echo=FALSE, message=FALSE}
library("readr")
library("dplyr")
library("tidyr")
```

```{r, message=FALSE}
# Contains names of plants and animals, as well as endangerment status, in NY at the county level
biodiversity = read_csv("Biodiversity_by_County_-_Distribution_of_Animals__Plants_and_Natural_Communities.csv")

# Contains estimations for human populations and growth rate in each NY county
countyPop = read_csv("NYCounties.csv")

# Contains estimated land mass of NY counties from 2010
# Areas are in square miles
countyArea = read_csv("NYCountyArea.csv")
```

```{r, warning=FALSE}
# Change spaces into underscores and make lowercase for biodiversity column names
names(biodiversity) = gsub(" ", "_", tolower(names(biodiversity)))

# Clean the biodiversity dataset
biodiversity = biodiversity %>% 
  # Remove unwanted columns
  select(everything(), 
         -ny_listing_status, 
         -federal_listing_status, 
         -distribution_status, 
         -year_last_documented,
         -scientific_name) %>% 
  # Remove non-plant/animal entries
  filter(category != "Natural Community",
         category != "not listed",
         taxonomic_group != "Animal Assemblages")
  
# Clean county population dataset and join with the biodiversity dataset
biodiversity = countyPop %>% 
  separate(CTYNAME, into = c("county", NA), sep = " ") %>% 
  rename(human_pop_county = pop2021, human_growth_rate = GrowthRate) %>%
  right_join(biodiversity, by = "county")
  

# Clean county areas dataset and join with the biodiversity dataset
biodiversity = countyArea %>% 
  select(BASENAME, AREALAND, AREAWATER) %>% 
  rename(county = BASENAME,
         land_area = AREALAND,
         water_area = AREAWATER) %>% 
  right_join(biodiversity, by = "county")
```

```{r, echo=FALSE}
head(biodiversity)
```


```{r}
biodiversity %>% group_by(category) %>% summarise(n = n_distinct(state_conservation_rank))
biodiversity %>% summarise(n = n_distinct(global_conservation_rank))
```

